/* ===== Base shared ===== */
*{ box-sizing:border-box }
html,body{
  margin:0; padding:0; height:100%;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  overflow:hidden;
}

/* Theme variables (Cool & Warm) */
body{
  --bg:#05070a;
  --pane:#0c1118;
  --edge:#1d2632;
  --ink:#dfe7ff;
  --muted:#8da3ba;

  --feed:#69e4d1;     /* aqua */
  --feedA: rgba(105,228,209,.9);
  --starve:#ff77aa;   /* magenta/pink */
  --starveA: rgba(255,119,170,.9);

  --bar1:#6bb7ff; --bar2:#a7c8ff;

  --flowA:#5FF3D1; --flowB:#FF69C9;

  --shadow:0 16px 46px rgba(0,0,0,.42);
}
body.theme-warm{
  --bg:#0b0706;
  --pane:#160c0b;
  --edge:#3a2320;
  --ink:#ffe9e3;
  --muted:#d8b6ad;

  --feed:#ffba7a;      /* warm amber for 'good' */
  --feedA: rgba(255,186,122,.95);
  --starve:#ff8aa1;    /* warm pink-red */
  --starveA: rgba(255,138,161,.95);

  --bar1:#ffb477; --bar2:#ffd2b1;

  --flowA:#ff9f5e; --flowB:#ffc6a4;

  --shadow:0 16px 46px rgba(0,0,0,.55);
}

/* fullscreen canvas behind everything */
#org-canvas{
  position:fixed; inset:0; width:100vw; height:100vh; z-index:0; display:block;
  background:transparent;
}

/* ===== Topbar ===== */
.topbar{
  position:relative; z-index:2;
  display:grid; grid-template-columns: 1fr auto;
  align-items:center; gap:18px;
  padding:12px 16px;
  color:var(--ink);
}
.brand{ font-size:18px; letter-spacing:.2px; opacity:.9; }
.chips{ display:flex; gap:8px; flex-wrap:wrap; }
.chip{
  background:color-mix(in oklab, var(--pane), black 15%); color:color-mix(in oklab, var(--ink), #cfe0ff 20%);
  border:1px solid var(--edge); border-radius:999px; padding:4px 9px; font-size:12px;
}
.ok{ color:var(--feed) }

.inline-metrics{ display:flex; align-items:center; gap:18px; justify-content:flex-end; }
.kv label{ display:block; font-size:11px; color:var(--muted); }
.kv span{ font-variant-numeric: tabular-nums; }

.btn{
  background:transparent; border:1px solid var(--edge); color:var(--ink);
  border-radius:8px; padding:6px 10px; cursor:pointer; font-size:13px;
}
.btn:hover{ border-color:color-mix(in oklab, var(--edge), white 15%); }
.btn.ghost{ background:transparent; }

.meter{ width:260px; }
.flowline{ display:flex; align-items:center; gap:8px; }
.flowline .flow{ flex:1; height:4px; background:color-mix(in oklab, var(--pane), black 20%); border-radius:3px; overflow:hidden; }
.flowline .flow span{ display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--flowA),var(--flowB)); transition:width .4s; }
#flowLabel{ color:var(--muted); font-size:12px; }

/* ===== Ring HUD (center area) ===== */
.ring-hud{
  position:fixed; inset:0; z-index:2; pointer-events:none;
  display:grid; grid-template-columns:240px 380px 240px; gap:28px;
  place-items:center;
}
.gauge{ display:grid; gap:8px; justify-items:center; }
.gauge .label{ font-size:13px; color:var(--muted); }
.gauge .label span{ color:var(--ink); }

/* Thin glowing arc (not pie) */
.gauge .ring{
  --val:0;             /* degrees 0..360 */
  --ringColor: var(--feedA);
  width:220px; height:220px; border-radius:50%;
  background:
    radial-gradient(closest-side, var(--bg) 72%, transparent 78%),
    conic-gradient(var(--ringColor) 0deg calc(var(--val)*1deg), transparent 0deg 360deg);
  box-shadow:
    inset 0 0 12px rgba(0,0,0,.85),
    0 0 24px var(--ringColor),
    0 0 65px var(--ringColor);
  position:relative;
  mask-image: radial-gradient(circle, transparent 70%, black 80%);
  -webkit-mask-image: radial-gradient(circle, transparent 70%, black 80%);
}
.gauge.health .ring{ --ringColor: var(--feedA); }
.gauge.mut .ring{ --ringColor: var(--starveA); }

/* Nucleus info card */
.nucleus{
  width:100%; max-width:380px; pointer-events:auto;
  background: color-mix(in oklab, var(--pane), black 10%);
  border:1px solid var(--edge);
  border-radius:18px;
  padding:14px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
  color:var(--ink);
}
.nucleus .title{ font-size:14px; margin-bottom:8px; opacity:.9; }
.kvrow{ display:grid; grid-template-columns: 110px 1fr; align-items:center; gap:10px; margin-bottom:10px; }
.kvrow .kv{ display:flex; gap:8px; }
.kvrow .kv.full{ grid-column:1/-1; display:block; }
.kvrow label{ font-size:12px; color:var(--muted); }
.subtext{ font-size:11px; color:var(--muted); margin-top:4px; }

/* small bar inside nucleus */
.bar{ flex:1; height:6px; background:color-mix(in oklab, var(--pane), black 20%); border-radius:3px; overflow:hidden; position:relative; }
.bar > span{ display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--bar1),var(--bar2)); transition:width .3s ease; }

/* ===== Bottom dock ===== */
.dock{
  z-index:2; position:absolute; left:0; right:0; bottom:10px;
  display:grid; grid-template-columns: 1fr 1.3fr; gap:16px;
  padding:0 12px;
}
.panel{
  background: color-mix(in oklab, var(--pane), black 6%);
  border:1px solid var(--edge);
  border-radius:14px;
  padding:10px 12px 12px;
  box-shadow: var(--shadow);
}
.panel-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.panel-head h3{ margin:0; font-size:14px; color:var(--ink); opacity:.9; }
.live-dot{ color:var(--feed); margin-left:6px; font-size:12px; }

/* vitals rows */
.vitals .kvrow{ grid-template-columns: 70px 1fr 40px; gap:10px; margin:8px 0; }
.vitals .kvrow.small{ grid-template-columns: auto 1fr auto auto; color:var(--muted); }
.vitals .pct{ text-align:right; color:color-mix(in oklab, var(--ink), #cfe0ff 15%); font-variant-numeric: tabular-nums; }

/* trades feed */
.feedlist{ display:grid; gap:8px; }
.feed-head{
  display:grid; grid-template-columns: 90px 80px 1fr 1fr; gap:8px;
  color:var(--muted); font-size:12px; padding-bottom:4px; border-bottom:1px solid var(--edge);
}
#trades-body .row{
  display:grid; grid-template-columns: 90px 80px 1fr 1fr; gap:8px;
  padding:10px 12px; border-radius:10px;
  background: color-mix(in oklab, var(--pane), black 12%);
  border:1px solid var(--edge);
}
#trades-body .row .t{ color:var(--muted); }
#trades-body .row .p{ color:color-mix(in oklab, var(--ink), #b0c8ff 20%); }
#trades-body .row .type{ color:var(--feed); }
#trades-body .row .type.starve{ color:var(--starve); }

/* footer tiny */
.foot{
  position:absolute; bottom:0; width:100%;
  font-size:11px; opacity:.45; text-align:center; padding:4px; z-index:1;
}

/* ===== Responsive ===== */
@media (max-width: 1200px){
  .ring-hud{ grid-template-columns: 220px 1fr 220px; gap:18px; }
  .nucleus{ max-width:340px; }
}
@media (max-width: 980px){
  .ring-hud{ display:none; }
  .dock{ grid-template-columns: 1fr; gap:12px; padding: 0 10px 10px; }
}
