/* ===== Base ===== */
:root{ --ink:#dfe7ff; --muted:#8da3ba; }

/* COOL default */
body.theme-cool{
  --bg:#05070a; --pane:#0b1118; --edge:#1b2736;
  --ok:#69e4d1; --okA:rgba(105,228,209,.9);
  --warn:#ff77aa; --warnA:rgba(255,119,170,.9);
  --acc:#9cc8ff;
  --ringHealth:#5ff3d1; --ringMutation:#ff69c9;
  --flowA:#5ff3d1; --flowB:#ff69c9;
  --hazeTint:rgba(60,140,160,.12); --ringStroke:rgba(140,200,255,.10);
  --tetherTint:rgba(95,243,209,.55);
}
/* WARM theme */
body.theme-warm{
  --bg:#0a0706; --pane:#140b0a; --edge:#352226;
  --ok:#ffa26e; --okA:rgba(255,162,110,.92);
  --warn:#ff6fa3; --warnA:rgba(255,111,163,.92);
  --acc:#ffd0b6;
  --ringHealth:#ffa26e; --ringMutation:#ff6fa3;
  --flowA:#ffa26e; --flowB:#ffbfa0;
  --hazeTint:rgba(160,60,50,.14); --ringStroke:rgba(255,180,150,.10);
  --tetherTint:rgba(255,162,110,.52);
}
body{ background:var(--bg); color:var(--ink); }

/* Canvas behind everything */
#org-canvas{ position:fixed; inset:0; width:100vw; height:100vh; z-index:0; display:block; background:transparent; }

/* ===== Topbar (unchanged layout, refined sizing) ===== */
.topbar{ position:relative; z-index:2; display:grid; grid-template-columns:1fr auto; gap:16px; align-items:center; padding:10px 14px; color:#b4c4e7; }
.brand{ font-size:17px; color:#cfe0ff; }
.chips{ display:flex; gap:6px; flex-wrap:wrap; }
.chip{ background:#0f1a2f; color:#c5d4ff; border:1px solid #22355a; border-radius:999px; padding:3px 8px; font-size:11px; }
.inline-metrics{ display:flex; align-items:center; gap:16px; justify-content:flex-end; }
.kv label{ display:block; font-size:11px; color:var(--muted); }
.kv span{ font-variant-numeric: tabular-nums; }
.btn{ background:#0e1826; border:1px solid #203149; color:#d9e8ff; border-radius:6px; padding:6px 9px; cursor:pointer; }
.btn.ghost{ background:transparent; }
.btn:hover{ border-color:#33527d; }

/* Net Flow meter on top */
.meter{ width:250px; }
.flowline{ display:flex; align-items:center; gap:8px; }
.flowline .flow{ flex:1; height:4px; background:#122030; border-radius:3px; overflow:hidden; }
.flowline .flow span{ display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--flowA),var(--flowB)); transition:width .35s ease; }
#flowLabel{ color:#9bb2cb; font-size:12px; }

/* ===== Ring HUD ===== */
.ring-hud{ position:fixed; inset:0; z-index:2; pointer-events:none; display:grid; grid-template-columns:220px 360px 220px; gap:24px; place-items:center; }
.gauge{ display:grid; gap:6px; justify-items:center; }
.gauge .label{ font-size:12px; color:var(--muted); }
.gauge .label span{ color:var(--ink); }

/* Thin glowing arc with halo */
.gauge .ring{
  --val:0; --ringColor:#69e4d1;
  width:200px; height:200px; border-radius:50%;
  background:
    radial-gradient(closest-side, var(--bg) 72%, transparent 78%),
    conic-gradient(var(--ringColor) 0deg calc(var(--val)*1deg), transparent 0 360deg);
  box-shadow: inset 0 0 10px rgba(0,0,0,.85), 0 0 22px var(--ringColor), 0 0 58px var(--ringColor);
  mask-image: radial-gradient(circle, transparent 70%, black 80%);
  -webkit-mask-image: radial-gradient(circle, transparent 70%, black 80%);
}
.gauge.health .ring{ --ringColor:var(--ringHealth); }
.gauge.mut    .ring{ --ringColor:var(--ringMutation); }

/* Nucleus card — smaller & crisper */
.nucleus{
  width:100%; max-width:360px; pointer-events:auto;
  background: rgba(8,12,18,.78);
  border:1px solid var(--edge);
  border-radius:14px;
  padding:12px;
  box-shadow: 0 12px 36px rgba(0,0,0,.65);
  backdrop-filter: blur(12px);
}
.nucleus .title{ font-size:13px; margin-bottom:6px; color:#e7f0ff; }
.kvrow{ display:grid; grid-template-columns: 95px 1fr; align-items:center; gap:8px; margin-bottom:8px; }
.kvrow .kv{ display:flex; gap:6px; }
.kvrow .kv.full{ grid-column:1/-1; display:block; }
.kvrow label{ font-size:11px; color:#92a6bd; }
.subtext{ font-size:11px; color:#8da3ba; margin-top:4px; }

/* bars (slimmer, brighter fill) */
.bar{ flex:1; height:5px; background:#182437; border-radius:3px; overflow:hidden; position:relative; }
.bar > span{ display:block; height:100%; width:0%; background:linear-gradient(90deg,#7fb8ff,var(--acc)); transition:width .25s ease; }

/* ===== Bottom dock — compact panels ===== */
.dock{
  z-index:2; position:absolute; left:0; right:0; bottom:10px;
  display:grid; grid-template-columns: 1fr 1.2fr; gap:14px;
  padding:0 10px;
}
.panel{
  background: rgba(8,12,18,.82);
  border:1px solid #213045;
  border-radius:12px;
  padding:10px 10px 12px;
  box-shadow: 0 16px 40px rgba(0,0,0,.55);
}
.panel-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }
.panel-head h3{ margin:0; font-size:13px; color:#dbe7ff; }
.live-dot{ color:var(--ok); margin-left:6px; font-size:12px; }

/* vitals rows (tight) */
.vitals .kvrow{ grid-template-columns: 64px 1fr 40px; gap:8px; margin:6px 0; }
.vitals .kvrow.small{ grid-template-columns: auto 1fr auto auto; color:#9db0c6; margin-top:4px; }
.vitals .pct{ text-align:right; color:#bcd4ff; font-variant-numeric: tabular-nums; }

/* trades feed — three rows max, compact cards */
.feedlist{ display:grid; gap:6px; }
.feed-head{ display:grid; grid-template-columns: 78px 68px 1fr 1fr; gap:8px; color:#99afc7; font-size:12px; }
#trades-body{ display:grid; gap:6px; }
#trades-body .row{
  display:grid; grid-template-columns: 78px 68px 1fr 1fr; gap:8px;
  background: rgba(18,24,34,.55); border:1px solid #223349;
  padding:8px 10px; border-radius:9px; line-height:1.1;
}
#trades-body .row .t{ color:#9fb6d0; font-variant-numeric: tabular-nums; }
#trades-body .row .p{ color:#cce1ff; }
#trades-body .row .type{ color:var(--ok); }
#trades-body .row .type.starve{ color:var(--warn); }

/* footer tiny */
.foot{ position:absolute; bottom:0; width:100%; font-size:11px; opacity:.45; text-align:center; padding:4px; z-index:1; }

/* Responsive */
@media (max-width:1200px){
  .ring-hud{ grid-template-columns: 200px 1fr 200px; gap:18px; }
  .nucleus{ max-width:320px; }
}
@media (max-width:980px){
  .ring-hud{ display:none; }
  .dock{ grid-template-columns: 1fr; gap:12px; padding: 0 10px 10px; }
}
